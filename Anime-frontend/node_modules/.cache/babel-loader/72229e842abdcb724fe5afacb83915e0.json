{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tohze\\\\coding\\\\recipe-project-master\\\\food-recp-frontend\\\\src\\\\components\\\\Recipe\\\\RecipeDetail.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Axios from \"../utils/Axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class RecipeDetail extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      title: \"\",\n      dishTypes: \"\",\n      servings: \"\",\n      aggregateLikes: [],\n      image: \"\",\n      isLoading: true,\n      telInput: \"\",\n      textareaIput: \"\",\n      friendsArray: [],\n      selectedFriendFirstName: \"\",\n      selectedFriendLastName: \"\",\n      selectedFriendID: \"\",\n      selectedFriendMobileNumber: \"\",\n      friendMessage: \"\",\n      originalMessage: \"\"\n    };\n\n    this.fetchAllFriends = async () => {\n      try {\n        let allFriends = await Axios.get(\"/api/friend/get-all-friends\");\n        this.setState({\n          friendsArray: allFriends.data.friends\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.fetchRecipe = async () => {\n      console.log('RecipeDetails:', this.props.match);\n      console.log('fetching id:', this.props.match.params.recipeName);\n\n      try {\n        let result = await axios.get(`https://api.spoonacular.com/recipes/${this.props.match.params.recipeName}/information?apiKey=${process.env.REACT_APP_COOKING_API}`);\n        this.setState({\n          aggregateLikes: result.data.aggregateLikes,\n          dishTypes: result.data.dishTypes,\n          servings: result.data.servings,\n          title: result.data.title,\n          image: result.data.image,\n          isLoading: false\n        }, () => {\n          this.setState({\n            friendMessage: `I think this Dish is delicious. ${this.state.title}`\n          });\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.showRecipeDetail = () => {\n      console.log('thisState:', this.state);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: this.state.image,\n            alt: this.state.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Serving Size: \", this.state.servings]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Dish Type: \", this.state.dishTypes]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Likes: \", this.state.aggregateLikes]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.handleFormSubmit = async event => {\n      event.preventDefault();\n\n      try {\n        let message = this.state.friendMessage;\n        let result = await Axios.post(\"/api/twilio/send-sms\", {\n          to: this.state.selectedFriendMobileNumber,\n          message: message\n        });\n        console.log(result);\n      } catch (e) {\n        console.log(e.response);\n      }\n    };\n\n    this.handleSelectChange = event => {\n      // console.log(JSON.parse(event.target.value));\n      // console.log(event.target.value);\n      let selectedUser = JSON.parse(event.target.value);\n      this.setState({\n        selectedFriendFirstName: selectedUser.firstName,\n        selectedFriendLastName: selectedUser.lastName,\n        selectedFriendID: selectedUser._id,\n        selectedFriendMobileNumber: selectedUser.mobileNumber,\n        friendMessage: `Hey ${selectedUser.firstName}, ${this.state.originalMessage}`\n      });\n    };\n  }\n\n  async componentDidMount() {\n    this.fetchRecipe();\n    this.fetchAllFriends();\n  }\n\n  render() {\n    // console.log(this.state);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.state.isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: \"center\",\n          marginTop: \"50px\"\n        },\n        children: \"...Loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [this.showRecipeDetail(), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 250,\n            margin: \"0 auto\",\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            onChange: this.handleSelectChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Select a friend\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this), this.state.friendsArray.map(friend => {\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: JSON.stringify(friend),\n                children: [friend.firstName, \" \", friend.lastName]\n              }, friend._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            col: \"50\",\n            rows: \"20\",\n            defaultValue: this.state.friendMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.handleFormSubmit,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport default RecipeDetail;","map":{"version":3,"sources":["C:/Users/tohze/coding/recipe-project-master/food-recp-frontend/src/components/Recipe/RecipeDetail.js"],"names":["React","Component","axios","Axios","RecipeDetail","state","title","dishTypes","servings","aggregateLikes","image","isLoading","telInput","textareaIput","friendsArray","selectedFriendFirstName","selectedFriendLastName","selectedFriendID","selectedFriendMobileNumber","friendMessage","originalMessage","fetchAllFriends","allFriends","get","setState","data","friends","e","console","log","fetchRecipe","props","match","params","recipeName","result","process","env","REACT_APP_COOKING_API","showRecipeDetail","display","handleFormSubmit","event","preventDefault","message","post","to","response","handleSelectChange","selectedUser","JSON","parse","target","value","firstName","lastName","_id","mobileNumber","componentDidMount","render","textAlign","marginTop","width","margin","map","friend","stringify"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Axios from \"../utils/Axios\";\n\nexport class RecipeDetail extends Component {\n  state = {\n    title: \"\",\n    dishTypes: \"\",\n    servings: \"\",\n    aggregateLikes: [],\n    image: \"\",\n    isLoading: true,\n    telInput: \"\",\n    textareaIput: \"\",\n    friendsArray: [],\n    selectedFriendFirstName: \"\",\n    selectedFriendLastName: \"\",\n    selectedFriendID: \"\",\n    selectedFriendMobileNumber: \"\",\n    friendMessage: \"\",\n    originalMessage: \"\",\n  };\n\n  async componentDidMount() {\n    this.fetchRecipe();\n    this.fetchAllFriends();\n  }\n\n  fetchAllFriends = async () => {\n    try {\n      let allFriends = await Axios.get(\"/api/friend/get-all-friends\");\n\n      this.setState({\n        friendsArray: allFriends.data.friends,\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  fetchRecipe = async () => {\n    console.log('RecipeDetails:',this.props.match)\n    console.log('fetching id:',this.props.match.params.recipeName)\n    try {\n      \n      let result = await axios.get(\n        `https://api.spoonacular.com/recipes/${this.props.match.params.recipeName}/information?apiKey=${process.env.REACT_APP_COOKING_API}`\n      );\n\n      this.setState(\n        {\n            aggregateLikes: result.data.aggregateLikes,\n            dishTypes: result.data.dishTypes,\n            servings: result.data.servings,\n            title: result.data.title,\n            image: result.data.image,\n            isLoading: false,\n        },\n        () => {\n          this.setState({\n            friendMessage: `I think this Dish is delicious. ${this.state.title}`,\n          });\n        }\n      );\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  showRecipeDetail = () => {\n    console.log('thisState:',this.state)\n    return (\n      <div style={{ display: \"flex\" }}>\n        <div>\n          <img src={this.state.image} alt={this.state.title} />\n        </div>\n        <div>\n        <div>Serving Size: {this.state.servings}</div>  \n          <div>Dish Type: {this.state.dishTypes}</div> \n          <div>Likes: {this.state.aggregateLikes}</div> \n          \n        </div>\n      </div>\n    );\n  };\n\n  handleFormSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      let message = this.state.friendMessage;\n\n      let result = await Axios.post(\"/api/twilio/send-sms\", {\n        to: this.state.selectedFriendMobileNumber,\n        message: message,\n      });\n\n      console.log(result);\n    } catch (e) {\n      console.log(e.response);\n    }\n  };\n\n  handleSelectChange = (event) => {\n    // console.log(JSON.parse(event.target.value));\n    // console.log(event.target.value);\n\n    let selectedUser = JSON.parse(event.target.value);\n\n    this.setState({\n      selectedFriendFirstName: selectedUser.firstName,\n      selectedFriendLastName: selectedUser.lastName,\n      selectedFriendID: selectedUser._id,\n      selectedFriendMobileNumber: selectedUser.mobileNumber,\n      friendMessage: `Hey ${selectedUser.firstName}, ${this.state.originalMessage}`,\n    });\n  };\n\n  render() {\n    // console.log(this.state);\n    return (\n      <div>\n        {this.state.isLoading ? (\n          <div style={{ textAlign: \"center\", marginTop: \"50px\" }}>\n            ...Loading\n          </div>\n        ) : (\n          <div>\n            {this.showRecipeDetail()}\n\n            <div style={{ width: 250, margin: \"0 auto\", textAlign: \"center\" }}>\n              <select onChange={this.handleSelectChange}>\n                <option>Select a friend</option>\n                {this.state.friendsArray.map((friend) => {\n                  return (\n                    <option key={friend._id} value={JSON.stringify(friend)}>\n                      {friend.firstName} {friend.lastName}\n                    </option>\n                  );\n                })}\n              </select>\n              <textarea\n                col=\"50\"\n                rows=\"20\"\n                defaultValue={this.state.friendMessage}\n              />\n              <br />\n              <button onClick={this.handleFormSubmit}>Submit</button>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default RecipeDetail;"]},"metadata":{},"sourceType":"module"}