{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tohze\\\\coding\\\\Anime\\\\Anime-frontend\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport jwtDecode from \"jwt-decode\";\nimport MainRouter from \"./MainRouter\";\nimport setAxiosAuthToken from \"./components/utils/setAxiosAuthToken\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: null\n    };\n\n    this.handleUserLogin = user => {\n      this.setState({\n        user: {\n          email: user.email\n        }\n      });\n    };\n\n    this.handleUserLogout = () => {\n      window.localStorage.removeItem(\"jwtToken\");\n      setAxiosAuthToken(null);\n      this.setState({\n        user: null\n      });\n    };\n  }\n\n  componentDidMount() {\n    let getJwtToken = window.localStorage.getItem(\"jwtToken\");\n\n    if (getJwtToken) {\n      const currentTime = Date.now() / 1000;\n      let decodedJWTToken = jwtDecode(getJwtToken);\n\n      if (decodedJWTToken.exp < currentTime) {\n        //logout\n        this.handleUserLogout();\n      } else {\n        //login\n        this.handleUserLogin(decodedJWTToken);\n      } // console.log(\"currentTime\", currentTime);\n      // June XXXX xxpm- 1624985322\n      // ONE DAY FROM June XXXX xxpm - 1625071722\n      // Current Time - 163500000\n      // console.log(\"decodedJWTToken\", decodedJWTToken);\n\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {\n        position: \"top-center\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MainRouter, {\n        user: this.state.user,\n        handleUserLogin: this.handleUserLogin,\n        handleUserLogout: this.handleUserLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\nexport default App;","map":{"version":3,"sources":["C:/Users/tohze/coding/Anime/Anime-frontend/src/App.js"],"names":["React","Component","ToastContainer","jwtDecode","MainRouter","setAxiosAuthToken","App","state","user","handleUserLogin","setState","email","handleUserLogout","window","localStorage","removeItem","componentDidMount","getJwtToken","getItem","currentTime","Date","now","decodedJWTToken","exp","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,cAAT,QAA+B,gBAA/B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,iBAAP,MAA8B,sCAA9B;AAEA,OAAO,WAAP;;;AAEA,OAAO,MAAMC,GAAN,SAAkBL,SAAlB,CAA4B;AAAA;AAAA;AAAA,SACjCM,KADiC,GACzB;AACNC,MAAAA,IAAI,EAAE;AADA,KADyB;;AAAA,SA6BjCC,eA7BiC,GA6BdD,IAAD,IAAU;AAC1B,WAAKE,QAAL,CAAc;AACZF,QAAAA,IAAI,EAAE;AACJG,UAAAA,KAAK,EAAEH,IAAI,CAACG;AADR;AADM,OAAd;AAKD,KAnCgC;;AAAA,SAqCjCC,gBArCiC,GAqCd,MAAM;AACvBC,MAAAA,MAAM,CAACC,YAAP,CAAoBC,UAApB,CAA+B,UAA/B;AACAV,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACA,WAAKK,QAAL,CAAc;AACZF,QAAAA,IAAI,EAAE;AADM,OAAd;AAGD,KA3CgC;AAAA;;AAKjCQ,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,WAAW,GAAGJ,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4B,UAA5B,CAAlB;;AAEA,QAAID,WAAJ,EAAiB;AACf,YAAME,WAAW,GAAGC,IAAI,CAACC,GAAL,KAAa,IAAjC;AAEA,UAAIC,eAAe,GAAGnB,SAAS,CAACc,WAAD,CAA/B;;AAEA,UAAIK,eAAe,CAACC,GAAhB,GAAsBJ,WAA1B,EAAuC;AACrC;AACA,aAAKP,gBAAL;AACD,OAHD,MAGO;AACL;AACA,aAAKH,eAAL,CAAqBa,eAArB;AACD,OAXc,CAaf;AACA;AACA;AACA;AACA;;AACD;AACF;;AAkBDE,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA,8BACE,QAAC,cAAD;AAAgB,QAAA,QAAQ,EAAC;AAAzB;AAAA;AAAA;AAAA;AAAA,cADF,eAGE,QAAC,UAAD;AACE,QAAA,IAAI,EAAE,KAAKjB,KAAL,CAAWC,IADnB;AAEE,QAAA,eAAe,EAAE,KAAKC,eAFxB;AAGE,QAAA,gBAAgB,EAAE,KAAKG;AAHzB;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA,oBADF;AAWD;;AAzDgC;AA4DnC,eAAeN,GAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport jwtDecode from \"jwt-decode\";\nimport MainRouter from \"./MainRouter\";\nimport setAxiosAuthToken from \"./components/utils/setAxiosAuthToken\";\n\nimport \"./App.css\";\n\nexport class App extends Component {\n  state = {\n    user: null,\n  };\n\n  componentDidMount() {\n    let getJwtToken = window.localStorage.getItem(\"jwtToken\");\n\n    if (getJwtToken) {\n      const currentTime = Date.now() / 1000;\n\n      let decodedJWTToken = jwtDecode(getJwtToken);\n\n      if (decodedJWTToken.exp < currentTime) {\n        //logout\n        this.handleUserLogout();\n      } else {\n        //login\n        this.handleUserLogin(decodedJWTToken);\n      }\n\n      // console.log(\"currentTime\", currentTime);\n      // June XXXX xxpm- 1624985322\n      // ONE DAY FROM June XXXX xxpm - 1625071722\n      // Current Time - 163500000\n      // console.log(\"decodedJWTToken\", decodedJWTToken);\n    }\n  }\n\n  handleUserLogin = (user) => {\n    this.setState({\n      user: {\n        email: user.email,\n      },\n    });\n  };\n\n  handleUserLogout = () => {\n    window.localStorage.removeItem(\"jwtToken\");\n    setAxiosAuthToken(null);\n    this.setState({\n      user: null,\n    });\n  };\n\n  render() {\n    return (\n      <>\n        <ToastContainer position=\"top-center\" />\n\n        <MainRouter\n          user={this.state.user}\n          handleUserLogin={this.handleUserLogin}\n          handleUserLogout={this.handleUserLogout}\n        />\n      </>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}